(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-user-edit"],{3919:function(a,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return l})),e.d(t,"a",(function(){return i}));var i={uniForms:e("839b").default,uniFormsItem:e("7e33").default,uniEasyinput:e("f304").default,uniDataCheckbox:e("674a").default},n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"uni-container"},[e("uni-forms",{ref:"form",attrs:{value:a.formData,validateTrigger:"bind"}},[e("uni-forms-item",{attrs:{name:"username",label:"用户名"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.username,callback:function(t){a.$set(a.formData,"username",t)},expression:"formData.username"}})],1),e("uni-forms-item",{attrs:{name:"airtabletoken",label:"airtabletoken"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.airtabletoken,callback:function(t){a.$set(a.formData,"airtabletoken",t)},expression:"formData.airtabletoken"}})],1),e("uni-forms-item",{attrs:{name:"airtablebaseid",label:"airtablebaseid"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.airtablebaseid,callback:function(t){a.$set(a.formData,"airtablebaseid",t)},expression:"formData.airtablebaseid"}})],1),e("uni-forms-item",{attrs:{name:"airtabletableid",label:"airtabletableid"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.airtabletableid,callback:function(t){a.$set(a.formData,"airtabletableid",t)},expression:"formData.airtabletableid"}})],1),e("uni-forms-item",{attrs:{name:"beizhutoken",label:"beizhutoken"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.beizhutoken,callback:function(t){a.$set(a.formData,"beizhutoken",t)},expression:"formData.beizhutoken"}})],1),e("uni-forms-item",{attrs:{name:"beizhubaseid",label:"beizhubaseid"}},[e("uni-easyinput",{attrs:{placeholder:"用户名，不允许重复",trim:"both"},model:{value:a.formData.beizhubaseid,callback:function(t){a.$set(a.formData,"beizhubaseid",t)},expression:"formData.beizhubaseid"}})],1),e("uni-forms-item",{staticClass:"flex-center-x",attrs:{name:"tags",label:"用户标签",labelWidth:"100"}},[e("uni-data-checkbox",{attrs:{pageSize:100,multiple:!0,collection:"uni-id-tag",field:"tagid as value, name as text"},model:{value:a.formData.tags,callback:function(t){a.$set(a.formData,"tags",t)},expression:"formData.tags"}}),e("span",{staticClass:"link-btn",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.gotoTagAdd.apply(void 0,arguments)}}},[a._v("新增")]),e("span",{staticClass:"link-btn",staticStyle:{"margin-left":"10px"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.gotoTagList.apply(void 0,arguments)}}},[a._v("管理")])],1),e("uni-forms-item",{attrs:{name:"city",label:"城市"}},[e("uni-easyinput",{attrs:{placeholder:"城市地址",trim:"both"},model:{value:a.formData.city,callback:function(t){a.$set(a.formData,"city",t)},expression:"formData.city"}})],1),e("uni-forms-item",{attrs:{name:"shouquanma",label:"授权码"}},[e("uni-easyinput",{attrs:{placeholder:"授权码",trim:"both"},model:{value:a.formData.shouquanma,callback:function(t){a.$set(a.formData,"shouquanma",t)},expression:"formData.shouquanma"}})],1),e("uni-forms-item",{attrs:{name:"yaohao",label:"要号否"}},[e("v-uni-switch",{attrs:{checked:a.formData.yaohao},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.binddata("yaohao",t.detail.value)}}})],1),e("uni-forms-item",{attrs:{name:"saoma",label:"扫码功能"}},[e("v-uni-switch",{attrs:{checked:a.formData.saoma},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.binddata("saoma",t.detail.value)}}})],1),e("uni-forms-item",{attrs:{name:"lock",label:"用户状态"}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.lock_localdata},model:{value:a.formData.lock,callback:function(t){a.$set(a.formData,"lock",t)},expression:"formData.lock"}})],1),e("uni-forms-item",{attrs:{name:"mobile",label:"手机号码"}},[e("uni-easyinput",{attrs:{placeholder:"手机号码",trim:"both"},model:{value:a.formData.mobile,callback:function(t){a.$set(a.formData,"mobile",t)},expression:"formData.mobile"}})],1),e("v-uni-view",{staticClass:"uni-button-group"},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.submit.apply(void 0,arguments)}}},[a._v("提交")]),e("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[a._v("返回")])],1)],1)],1)],1)},l=[]},"3fbc":function(a,t,e){"use strict";e.r(t);var i=e("3919"),n=e("8318");for(var l in n)["default"].indexOf(l)<0&&function(a){e.d(t,a,(function(){return n[a]}))}(l);var r=e("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=o.exports},"7c5e":function(a,t,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.enumConverter=void 0,t.filterToWhere=function(a,t){var e={};for(var i in a){var r=a[i],o=r.type,s=r.value;switch(o){case"search":"string"===typeof s&&s.length&&(e[i]=new RegExp(s));break;case"select":if(s.length){var u,c=[],f=(0,l.default)(s);try{for(f.s();!(u=f.n()).done;){var m=u.value;c.push(t.eq(m))}}catch(_){f.e(_)}finally{f.f()}e[i]=t.or(c)}break;case"range":if(s.length){var b=s[0],d=s[1];e[i]=t.and([t.gte(b),t.lte(d)])}break;case"date":if(s.length){var h=(0,n.default)(s,2),v=h[0],g=h[1],p=new Date(v),k=new Date(g);e[i]=t.and([t.gte(p),t.lte(k)])}break;case"timestamp":if(s.length){var y=(0,n.default)(s,2),D=y[0],x=y[1];e[i]=t.and([t.gte(D),t.lte(x)])}break}}return e},t.validator=void 0;var n=i(e("5de6")),l=i(e("3471"));e("23f4"),e("7d2f"),e("5c47"),e("9c4e"),e("ab80"),e("aa9c");t.validator={shouquanma:{rules:[{format:"string"}]},wx_openid:{rules:[{format:"object"}]},username:{rules:[{format:"string"},{minLength:2}],title:"用户名",label:"用户名"},uid:{rules:[{format:"string"},{minLength:2}],title:"uid",label:"uid"},id:{rules:[{format:"string"},{minLength:2}],title:"id",label:"id"},password:{rules:[{format:"string"},{minLength:6}],title:"密码",label:"密码"},city:{rules:[{format:"string"}],title:"城市",label:"城市"},airtabletoken:{rules:[{format:"string"}],title:"airtabletoken",label:"airtabletoken"},airtablebaseid:{rules:[{format:"string"}],title:"airtablebaseid",label:"airtablebaseid"},airtabletableid:{rules:[{format:"string"}],title:"airtabletableid",label:"airtabletableid"},beizhutoken:{rules:[{format:"string"}],title:"beizhutoken",label:"beizhutoken"},beizhubaseid:{rules:[{format:"string"}],title:"beizhubaseid",label:"beizhubaseid"},status:{rules:[{format:"int"},{range:[{text:"正常",value:0},{text:"禁用",value:1},{text:"审核中",value:2},{text:"审核拒绝",value:3}]}],title:"用户状态",defaultValue:0,label:"用户状态"},yaohao:{rules:[{format:"bool"}]},saoma:{rules:[{format:"bool"}]},lock:{rules:[{format:"int"},{range:[{text:"上锁",value:0},{text:"解锁",value:1}]}],title:"用户状态",defaultValue:0,label:"用户状态"},mobile:{rules:[{format:"string"},{pattern:"^\\+?[0-9-]{3,20}$"}],title:"手机号码",label:"手机号码"},last_login_date:{rules:[{format:"timestamp"}]},last_login_ip:{rules:[{format:"string"}]},login_ip_limit:{rules:[{format:"array"}]},role:{rules:[{format:"array"}],title:"角色",label:"角色"},dcloud_appid:{rules:[{format:"array"}],title:"可登陆应用appid",label:"可登陆应用appid"},tags:{rules:[{format:"array"}],title:"用户标签tagid",label:"用户标签tagid"}};t.enumConverter={status_valuetotext:{0:"正常",1:"禁用",2:"审核中",3:"审核拒绝"},lock_valuetotext:{0:"上锁",1:"解锁"}}},8318:function(a,t,e){"use strict";e.r(t);var i=e("98b7"),n=e.n(i);for(var l in i)["default"].indexOf(l)<0&&function(a){e.d(t,a,(function(){return i[a]}))}(l);t["default"]=n.a},"98b7":function(a,t,e){"use strict";(function(a,i){e("6a54");var n=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(e("9b1b"));e("4626"),e("5ac7"),e("dc8a"),e("bf0f");var r=e("7c5e"),o=a.database();o.command;function s(a){var t={};for(var e in r.validator)a.includes(e)&&(t[e]=r.validator[e]);return t}var u={data:function(){var a={shouquanma:"",zuijinzaixian:null,username:"",airtabletoken:"",airtablebaseid:"",airtabletableid:"",beizhutoken:"",beizhubaseid:"",city:"",yaohao:null,saoma:null,lock:0,mobile:"",tags:[],last_login_ip:"",register_date:null};return{formData:a,formOptions:{lock_localdata:[{text:"上锁",value:0},{text:"解锁",value:1}]},rules:(0,l.default)({},s(Object.keys(a)))}},onLoad:function(a){if(a.id){var t=a.id;this.formDataId=t,this.getDetail(t)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{gotoTagList:function(){uni.navigateTo({url:"../tag/list"})},gotoTagAdd:function(){var a=this;uni.navigateTo({url:"../tag/add",events:{refreshCheckboxData:function(){a.$refs.checkbox.loadData()}}})},submit:function(){var a=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(t){return a.submitForm(t)})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(a){var t=this;return o.collection("uni-id-users").doc(this.formDataId).update(a).then((function(a){uni.showToast({title:"修改成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})}))},getDetail:function(a){var t=this;uni.showLoading({mask:!0}),o.collection("uni-id-users").doc(a).field("tags,saoma,shouquanma,zuijinzaixian,username,beizhutoken,beizhubaseid,airtabletoken,airtablebaseid,airtabletableid,city,yaohao,lock,mobile,last_login_ip,register_date").get().then((function(a){var e=a.result.data[0];i.log(e),e&&(t.formData=e)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};t.default=u}).call(this,e("861b")["default"],e("ba7c")["default"])}}]);