(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-user-tongbu"],{"14d0":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return l})),e.d(a,"a",(function(){return i}));var i={uniForms:e("839b").default,uniFormsItem:e("7e33").default,uniDataCheckbox:e("674a").default,uniEasyinput:e("f304").default,uniDatetimePicker:e("64e7").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"uni-container"},[e("uni-forms",{ref:"form",attrs:{value:t.formData,validateTrigger:"bind"}},[e("uni-forms-item",{staticClass:"flex-center-x",attrs:{name:"tags",label:"用户标签",labelWidth:"100"}},[e("uni-data-checkbox",{attrs:{pageSize:100,multiple:!0,collection:"uni-id-tag",field:"tagid as value, name as text"},model:{value:t.formData.tags,callback:function(a){t.$set(t.formData,"tags",a)},expression:"formData.tags"}}),e("span",{staticClass:"link-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoTagAdd.apply(void 0,arguments)}}},[t._v("新增")]),e("span",{staticClass:"link-btn",staticStyle:{"margin-left":"10px"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoTagList.apply(void 0,arguments)}}},[t._v("管理")])],1),e("uni-forms-item",{attrs:{name:"mobile",label:"手机号码"}},[e("uni-easyinput",{attrs:{placeholder:"手机号码",trim:"both"},model:{value:t.formData.mobile,callback:function(a){t.$set(t.formData,"mobile",a)},expression:"formData.mobile"}})],1),e("uni-forms-item",{attrs:{name:"date",label:"注册时间"}},[e("uni-datetime-picker",{attrs:{type:"datetimerange","return-type":"timestamp",rangeSeparator:"至"},model:{value:t.formData.date,callback:function(a){t.$set(t.formData,"date",a)},expression:"formData.date"}})],1),e("v-uni-view",{staticClass:"uni-button-group"},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submit.apply(void 0,arguments)}}},[t._v("提交")]),e("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v("返回")])],1)],1)],1)],1)},l=[]},"576d":function(t,a,e){"use strict";e.r(a);var i=e("14d0"),n=e("6623");for(var l in n)["default"].indexOf(l)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(l);var r=e("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);a["default"]=o.exports},6623:function(t,a,e){"use strict";e.r(a);var i=e("7e43"),n=e.n(i);for(var l in i)["default"].indexOf(l)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(l);a["default"]=n.a},"7c5e":function(t,a,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.enumConverter=void 0,a.filterToWhere=function(t,a){var e={};for(var i in t){var r=t[i],o=r.type,u=r.value;switch(o){case"search":"string"===typeof u&&u.length&&(e[i]=new RegExp(u));break;case"select":if(u.length){var s,f=[],c=(0,l.default)(u);try{for(c.s();!(s=c.n()).done;){var d=s.value;f.push(a.eq(d))}}catch(w){c.e(w)}finally{c.f()}e[i]=a.or(f)}break;case"range":if(u.length){var m=u[0],b=u[1];e[i]=a.and([a.gte(m),a.lte(b)])}break;case"date":if(u.length){var g=(0,n.default)(u,2),v=g[0],h=g[1],p=new Date(v),k=new Date(h);e[i]=a.and([a.gte(p),a.lte(k)])}break;case"timestamp":if(u.length){var y=(0,n.default)(u,2),x=y[0],_=y[1];e[i]=a.and([a.gte(x),a.lte(_)])}break}}return e},a.validator=void 0;var n=i(e("5de6")),l=i(e("3471"));e("23f4"),e("7d2f"),e("5c47"),e("9c4e"),e("ab80"),e("aa9c");a.validator={shouquanma:{rules:[{format:"string"}]},wx_openid:{rules:[{format:"object"}]},username:{rules:[{format:"string"},{minLength:2}],title:"用户名",label:"用户名"},uid:{rules:[{format:"string"},{minLength:2}],title:"uid",label:"uid"},id:{rules:[{format:"string"},{minLength:2}],title:"id",label:"id"},password:{rules:[{format:"string"},{minLength:6}],title:"密码",label:"密码"},city:{rules:[{format:"string"}],title:"城市",label:"城市"},airtabletoken:{rules:[{format:"string"}],title:"airtabletoken",label:"airtabletoken"},airtablebaseid:{rules:[{format:"string"}],title:"airtablebaseid",label:"airtablebaseid"},airtabletableid:{rules:[{format:"string"}],title:"airtabletableid",label:"airtabletableid"},beizhutoken:{rules:[{format:"string"}],title:"beizhutoken",label:"beizhutoken"},beizhubaseid:{rules:[{format:"string"}],title:"beizhubaseid",label:"beizhubaseid"},status:{rules:[{format:"int"},{range:[{text:"正常",value:0},{text:"禁用",value:1},{text:"审核中",value:2},{text:"审核拒绝",value:3}]}],title:"用户状态",defaultValue:0,label:"用户状态"},yaohao:{rules:[{format:"bool"}]},saoma:{rules:[{format:"bool"}]},lock:{rules:[{format:"int"},{range:[{text:"上锁",value:0},{text:"解锁",value:1}]}],title:"用户状态",defaultValue:0,label:"用户状态"},mobile:{rules:[{format:"string"},{pattern:"^\\+?[0-9-]{3,20}$"}],title:"手机号码",label:"手机号码"},last_login_date:{rules:[{format:"timestamp"}]},last_login_ip:{rules:[{format:"string"}]},login_ip_limit:{rules:[{format:"array"}]},role:{rules:[{format:"array"}],title:"角色",label:"角色"},dcloud_appid:{rules:[{format:"array"}],title:"可登陆应用appid",label:"可登陆应用appid"},tags:{rules:[{format:"array"}],title:"用户标签tagid",label:"用户标签tagid"}};a.enumConverter={status_valuetotext:{0:"正常",1:"禁用",2:"审核中",3:"审核拒绝"},lock_valuetotext:{0:"上锁",1:"解锁"}}},"7e43":function(t,a,e){"use strict";(function(t,i){e("6a54");var n=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(e("9b1b"));e("4626"),e("5ac7"),e("dc8a"),e("bf0f");var r=e("7c5e"),o=t.database();o.command;function u(t){var a={};for(var e in r.validator)t.includes(e)&&(a[e]=r.validator[e]);return a}var s={data:function(){var t={shouquanma:"",zuijinzaixian:null,username:"",city:"",yaohao:null,saoma:null,lock:0,mobile:"",tags:[],last_login_ip:"",register_date:null};return{formData:t,formOptions:{lock_localdata:[{text:"上锁",value:0},{text:"解锁",value:1}]},rules:(0,l.default)({},u(Object.keys(t)))}},onLoad:function(t){if(t.id){var a=t.id;this.formDataId=a,this.getDetail(a)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{gotoTagList:function(){uni.navigateTo({url:"../tag/list"})},gotoTagAdd:function(){var t=this;uni.navigateTo({url:"../tag/add",events:{refreshCheckboxData:function(){t.$refs.checkbox.loadData()}}})},submit:function(){uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(a){i.log(a),t.callFunction({name:"tongbu",data:a,success:function(t){i.log(t),uni.showToast({title:"修改成功"}),setTimeout((function(){return uni.navigateBack()}),500)},fail:function(t){uni.showToast({title:"修改失败"})}})})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(t){var a=this;return o.collection("uni-id-users").doc(this.formDataId).update(t).then((function(t){uni.showToast({title:"修改成功"}),a.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})}))},getDetail:function(t){var a=this;uni.showLoading({mask:!0}),o.collection("uni-id-users").doc(t).field("tags,saoma,shouquanma,zuijinzaixian,username,city,yaohao,lock,mobile,last_login_ip,register_date").get().then((function(t){var e=t.result.data[0];i.log(e),e&&(a.formData=e)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};a.default=s}).call(this,e("861b")["default"],e("ba7c")["default"])}}]);